<!-- Deck summary partial for HTMX updates -->
<div class="space-y-2 text-sm">
    <div class="flex justify-between">
        <span class="text-gray-400">Main Deck:</span>
        <span class="{% if deck.main_deck_count < 75 %}text-red-400{% else %}text-green-400{% endif %}">
            {{ deck.main_deck_count }}/75+
        </span>
    </div>
    <div class="flex justify-between">
        <span class="text-gray-400">Market:</span>
        <span class="{% if deck.market_count > 5 %}text-red-400{% else %}text-green-400{% endif %}">
            {{ deck.market_count }}/5
        </span>
    </div>
    <div class="flex justify-between">
        <span class="text-gray-400">Power:</span>
        <span>{{ deck.power_count }}</span>
    </div>
</div>

{% if not validation.valid %}
<div class="mt-3 p-2 bg-red-900 rounded text-xs text-red-200">
    {% for error in validation.errors %}
    <p>{{ error }}</p>
    {% endfor %}
</div>
{% else %}
<div class="mt-3 p-2 bg-green-900 rounded text-xs text-green-200">
    Deck is valid!
</div>
{% endif %}

<!-- Card List -->
<div class="mt-4 space-y-1 max-h-64 overflow-y-auto">
    {% for dc in deck.main_deck_cards %}
    <div class="flex justify-between items-center text-xs bg-gray-700 rounded px-2 py-1">
        <span class="truncate">{{ dc.quantity }}x {{ dc.card.name }}</span>
        <button hx-post="{% url 'decks:deck_remove_card' deck.pk %}"
                hx-vals='{"card_id": "{{ dc.card.pk }}", "is_market": "false"}'
                hx-target="#deck-summary"
                class="text-red-400 hover:text-red-300 ml-2">&times;</button>
    </div>
    {% endfor %}

    {% if deck.market_count > 0 %}
    <div class="text-xs text-gray-500 mt-2 pt-2 border-t border-gray-600">Market:</div>
    {% for dc in deck.market_cards %}
    <div class="flex justify-between items-center text-xs bg-gray-700 rounded px-2 py-1">
        <span class="truncate">{{ dc.quantity }}x {{ dc.card.name }}</span>
        <button hx-post="{% url 'decks:deck_remove_card' deck.pk %}"
                hx-vals='{"card_id": "{{ dc.card.pk }}", "is_market": "true"}'
                hx-target="#deck-summary"
                class="text-red-400 hover:text-red-300 ml-2">&times;</button>
    </div>
    {% endfor %}
    {% endif %}
</div>
